# '차트 역주행의 아이콘' 기능 상세 구현 계획

## 1. 기능 컨셉

개봉한 지 2주 이상 지났지만, 최근 입소문을 타고 박스오피스 순위가 다시 올라가고 있는 '역주행' 영화를 자동으로 찾아내어 "이번 주 역주행의 아이콘"으로 선정하고, '트렌드' 탭에 하이라이트하여 보여주는 기능.

## 2. 사용자 가치

- **숨은 명작 발견:** 사용자가 개봉 초기에 놓쳤을 수 있는, 작품성이 뛰어나거나 화제가 되어 뒤늦게 인기를 얻고 있는 영화를 발견하는 재미 제공.
- **깊이 있는 탐색:** 단순 순위 정보를 넘어, "왜 이 영화가 다시 뜨고 있을까?" 하는 호기심을 자극하며 영화 시장의 트렌드를 읽는 새로운 관점 제시.

## 3. 상세 구현 계획

### 1단계: 백엔드 API 신설

**엔드포인트:** `GET /movies/box-office/sleeper-hit`

**필요 로직:**
1.  **데이터 수집:** KOBIS의 **'주간 박스오피스'** API를 사용하여, 최소 2주치(지난주, 지지난주)의 주간 박스오피스 TOP 10 데이터를 가져옵니다.
    - 예: `searchWeeklyBoxOfficeList.json` API 활용
    - `targetDt`를 일주일 간격으로 두 번 호출 필요.

2.  **'역주행' 영화 분석:**
    - 두 주의 데이터를 비교하여, 아래 조건을 모두 만족하는 영화를 찾아냅니다.
      a. 개봉한 지 2주 이상 된 영화 (`openDt` 기준)
      b. 지지난주 순위 대비 지난주 순위가 N단계 이상 상승한 영화 (예: 10위 -> 5위)
      c. 지지난주 TOP 10에 없다가 지난주 TOP 10으로 새로 진입한 영화도 '역주행' 후보가 될 수 있음.

3.  **데이터 보강 및 반환:**
    - 위 조건으로 찾은 '역주행' 영화가 여러 편일 경우, 순위 상승폭이 가장 크거나 관객 증가율이 가장 높은 영화 한 편을 "금주의 역주행 아이콘"으로 선정합니다.
    - 선정된 영화의 상세 정보(포스터, 줄거리 등)를 `get_movie_details` 또는 TMDB 검색을 통해 보강합니다.
    - 최종적으로 선정된 영화의 정보와 함께, "지난주 대비 3계단 상승!"과 같은 분석 데이터를 함께 반환합니다.

**참고:** 이 API는 여러 API를 호출하고 데이터를 비교 분석해야 하므로, 응답 속도가 느릴 수 있습니다. 따라서, 매번 요청 시 계산하는 것보다, 하루에 한 번 등 주기적으로 이 분석을 실행하여 결과를 캐싱해두는 방식(서버 스케줄링 작업)이 더 효율적입니다.

### 2단계: 프론트엔드 UI 구현

**대상 파일:** `app/(tabs)/trends.tsx`

**필요 로직:**
1.  **데이터 호출:** `trends.tsx` 화면이 로딩될 때, 새로 만든 `GET /movies/box-office/sleeper-hit` API를 호출합니다.
2.  **'역주행의 아이콘' 섹션 추가:**
    - '트렌드' 탭에 '역주행의 아이콘'이라는 제목의 새로운 섹션을 추가합니다.
    - API로부터 역주행 영화 데이터를 받았다면, 해당 영화의 포스터, 제목, 그리고 "지난주 대비 3계단 상승! 🚀" 과 같은 흥미로운 문구를 함께 표시하여 다른 섹션과 차별화되게 강조합니다.
    - 이 영화 카드를 클릭하면, 기존과 동일하게 영화 상세 정보 모달이 열리도록 연동합니다.
