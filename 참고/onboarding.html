<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineMind | ì·¨í–¥ ë¶„ì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
        }

        /* --- ìŠ¤ì™€ì´í”„ ì¹´ë“œ ìŠ¤íƒ ìŠ¤íƒ€ì¼ --- */
        .swipe-deck {
            position: relative;
            width: 100%;
            /* ì¹´ë“œì˜ ì„¸ë¡œ í¬ê¸° + ê·¸ë¦¼ì/í‹¸íŠ¸ ê³µê°„ */
            height: 480px; 
            max-width: 320px; /* ì¹´ë“œì˜ ê°€ë¡œ í¬ê¸° */
            margin: 1.5rem auto;
        }

        .swipe-card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 450px;
            background-color: white;
            border-radius: 1.25rem; /* 2xl */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            
            /* ì¹´ë“œ ìŠ¤íƒ íš¨ê³¼ ë° ì• ë‹ˆë©”ì´ì…˜ */
            transform-origin: bottom center;
            transition: all 0.4s cubic-bezier(0.33, 1, 0.68, 1);
        }

        /* ì¹´ë“œ ìŠ¤íƒ ì‹œê°í™” (JSë¡œ z-indexì™€ transformì„ ì œì–´) */
        .swipe-card:nth-last-child(2) {
            transform: scale(0.95) translateY(10px);
            z-index: 5; /* z-indexëŠ” JSê°€ ì œì–´í•©ë‹ˆë‹¤. */
            opacity: 0.9;
        }
        
        .swipe-card:nth-last-child(1) {
            transform: scale(0.9) translateY(20px);
            z-index: 4; /* z-indexëŠ” JSê°€ ì œì–´í•©ë‹ˆë‹¤. */
            opacity: 0.8;
        }

        /* ìŠ¤ì™€ì´í”„ ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ (JSë¡œ ì¶”ê°€/ì œê±°) */
        .swipe-left {
            transform: translateX(-150%) rotate(-20deg) !important;
            opacity: 0 !important;
        }
        
        .swipe-right {
            transform: translateX(150%) rotate(20deg) !important;
            opacity: 0 !important;
        }
    </style>
</head>
<body class="bg-neutral-100 text-neutral-800">

    <div class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-amber-500 flex items-center justify-center">
                <i class="fa-solid fa-film mr-3"></i>CineMind
            </h1>
        </div>

        <div class="w-full max-w-md">

            <div id="screen-1-mood" class="bg-white p-8 rounded-2xl shadow-lg w-full">
                <div class="text-center">
                    <h2 class="text-2xl font-bold mb-2">ì •ê·œì² ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!</h2>
                    <p class="text-neutral-600 text-lg">CineMindì˜ ì •í™•í•œ ì¶”ì²œì„ ìœ„í•´<br>ì§€ê¸ˆ ê¸°ë¶„ì„ ì•Œë ¤ì£¼ì„¸ìš”.</p>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mt-8">
                    <button class="mood-btn group" data-mood-text="ì‹ ë‚˜ëŠ”" data-mood-emoji="ğŸ”¥">
                        <span class="text-5xl transition-transform duration-200 group-hover:scale-110">ğŸ”¥</span>
                        <span class="font-semibold text-lg mt-2">ì‹ ë‚˜ëŠ”</span>
                    </button>
                    <button class="mood-btn group" data-mood-text="í–‰ë³µí•œ" data-mood-emoji="ğŸ˜Š">
                        <span class="text-5xl transition-transform duration-200 group-hover:scale-110">ğŸ˜Š</span>
                        <span class="font-semibold text-lg mt-2">í–‰ë³µí•œ</span>
                    </button>
                    <button class="mood-btn group" data-mood-text="ìœ„ë¡œê°€ í•„ìš”í•œ" data-mood-emoji="ğŸ˜¢">
                        <span class="text-5xl transition-transform duration-200 group-hover:scale-110">ğŸ˜¢</span>
                        <span class="font-semibold text-lg mt-2">ìœ„ë¡œê°€ í•„ìš”í•´ìš”</span>
                    </button>
                    <button class="mood-btn group" data-mood-text="ìƒê°ì´ ë§ì€" data-mood-emoji="ğŸ¤”">
                        <span class="text-5xl transition-transform duration-200 group-hover:scale-110">ğŸ¤”</span>
                        <span class="font-semibold text-lg mt-2">ìƒê°ì´ ë§ì•„ìš”</span>
                    </button>
                </div>
            </div>

            <div id="screen-2-swipe" class="bg-white p-6 md:p-8 rounded-2xl shadow-lg w-full hidden">
                <div class="text-center mb-4">
                    <h2 id="swipe-title" class="text-2xl font-bold mb-1"></h2>
                    <p class="text-neutral-600">ë§ˆìŒì— ë“œëŠ” ì˜í™”ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
                </div>

                <div class="w-full mb-2">
                    <span id="progress-text" class="text-sm font-medium text-amber-600">0/10</span>
                    <div class="w-full bg-neutral-200 rounded-full h-2.5 mt-1">
                        <div id="progress-bar" class="bg-amber-500 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>

                <div id="card-deck" class="swipe-deck">
                    </div>

                <div class="flex justify-center items-center space-x-10">
                    <button id="dislike-btn" class="flex items-center justify-center w-20 h-20 bg-neutral-200 hover:bg-neutral-300 rounded-full shadow-lg transition-transform duration-200 hover:scale-110">
                        <i class="fa-solid fa-xmark text-neutral-600 text-4xl"></i>
                    </button>
                    <button id="like-btn" class="flex items-center justify-center w-20 h-20 bg-amber-500 hover:bg-amber-600 rounded-full shadow-lg transition-transform duration-200 hover:scale-110">
                        <i class="fa-solid fa-heart text-white text-3xl"></i>
                    </button>
                </div>
            </div>

            <div id="screen-3-complete" class="bg-white p-8 rounded-2xl shadow-lg w-full text-center hidden">
                
                <div id="loading-state">
                    <i class="fa-solid fa-spinner fa-spin text-amber-500 text-6xl"></i>
                    <p class="text-xl font-semibold text-neutral-700 mt-6">ì •ê·œì² ë‹˜ì˜ ì·¨í–¥ì„<br>ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>

                <div id="result-state" class="hidden">
                    <h2 class="text-3xl font-bold mb-4">ë¶„ì„ ì™„ë£Œ! <span class="text-2xl">ğŸ‰</span></h2>
                    <p class="text-lg text-neutral-700 mb-8">
                        ì •ê·œì² ë‹˜ì€<br>
                        <strong id="result-text" class="text-amber-600 text-xl">'ê°ì„±ì ì¸ ë“œë¼ë§ˆ'</strong>
                        ë¥¼ ì„ í˜¸í•˜ëŠ” ë¶„ì´ë„¤ìš”!
                    </p>
                    <a href="main.html" class="w-full block bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 px-4 rounded-lg transition text-lg">
                        ì²« ë§ì¶¤ ì¶”ì²œ ë³´ëŸ¬ê°€ê¸°
                    </a>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- DOM ìš”ì†Œ ì„ íƒ ---
        const screen1 = document.getElementById('screen-1-mood');
        const screen2 = document.getElementById('screen-2-swipe');
        const screen3 = document.getElementById('screen-3-complete');
        
        const moodButtons = document.querySelectorAll('.mood-btn');
        const swipeTitle = document.getElementById('swipe-title');
        
        const cardDeck = document.getElementById('card-deck');
        const likeBtn = document.getElementById('like-btn');
        const dislikeBtn = document.getElementById('dislike-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        const loadingState = document.getElementById('loading-state');
        const resultState = document.getElementById('result-state');
        const resultText = document.getElementById('result-text');

        // --- ì˜í™” ë°ì´í„° (ê¸°ë¶„ë³„) ---
        // [ìˆ˜ì •] placeholder í…ìŠ¤íŠ¸ë¥¼ í•œê¸€ì—ì„œ ì˜ë¬¸ìœ¼ë¡œ ë³€ê²½
        const movieData = {
            'ì‹ ë‚˜ëŠ”': [
                { id: 1, title: 'ë²”ì£„ë„ì‹œ 2', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+1', genre: 'action' },
                { id: 2, title: 'ìŠ¤íŒŒì´ë”ë§¨: ë…¸ ì›¨ì´ í™ˆ', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+2', genre: 'action' },
                { id: 3, title: 'íƒ‘ê±´: ë§¤ë²„ë¦­', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+3', genre: 'action' },
                { id: 4, title: 'ê°€ë””ì–¸ì¦ˆ ì˜¤ë¸Œ ê°¤ëŸ­ì‹œ', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+4', genre: 'sf' },
                { id: 5, title: 'ë¶„ë…¸ì˜ ì§ˆì£¼: ë¼ì´ë“œ ì˜¤ì–´ ë‹¤ì´', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+5', genre: 'action' },
                { id: 6, title: 'í‚¹ìŠ¤ë§¨: ì‹œí¬ë¦¿ ì—ì´ì „íŠ¸', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+6', genre: 'action' },
                { id: 7, title: 'ë°ë“œí’€', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+7', genre: 'action' },
                { id: 8, title: 'ë§¤ë“œ ë§¥ìŠ¤: ë¶„ë…¸ì˜ ë„ë¡œ', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+8', genre: 'action' },
                { id: 9, title: 'ì–´ë²¤ì ¸ìŠ¤: ì—”ë“œê²Œì„', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+9', genre: 'sf' },
                { id: 10, title: 'ë¯¸ì…˜ ì„íŒŒì„œë¸”: ë°ë“œ ë ˆì½”ë‹', poster: 'https://placehold.co/320x450/F59E0B/white?text=Exciting+Movie+10', genre: 'action' }
            ],
            'ìœ„ë¡œê°€ í•„ìš”í•œ': [
                { id: 11, title: 'ë¦¬í‹€ í¬ë ˆìŠ¤íŠ¸', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+1', genre: 'drama' },
                { id: 12, title: 'ì–´ë°”ì›ƒ íƒ€ì„', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+2', genre: 'romance' },
                { id: 13, title: 'ì†Œìš¸', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+3', genre: 'animation' },
                { id: 14, title: 'ì¸í„´', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+4', genre: 'drama' },
                { id: 15, title: 'ì›”í„°ì˜ ìƒìƒì€ í˜„ì‹¤ì´ ëœë‹¤', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+5', genre: 'drama' },
                { id: 16, title: 'íŒ¨ë”©í„´ 2', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+6', genre: 'animation' },
                { id: 17, title: 'ì›ë”', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+7', genre: 'drama' },
                { id: 18, title: 'ì½”ë‹¤', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+8', genre: 'drama' },
                { id: 19, title: 'ì¸ì‚¬ì´ë“œ ì•„ì›ƒ', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+9', genre: 'animation' },
                { id: 20, title: 'ê·¸ë¦° ë¶', poster: 'https://placehold.co/320x450/3B82F6/white?text=Comfort+Movie+10', genre: 'drama' }
            ]
        };

        movieData['í–‰ë³µí•œ'] = [
            { id: 21, title: 'ë§˜ë§ˆë¯¸ì•„!', poster: 'https://placehold.co/320x450/10B981/white?text=Happy+Movie+1', genre: 'romance' },
            { id: 22, title: 'ë¼ë¼ëœë“œ', poster: 'https://placehold.co/320x450/10B981/white?text=Happy+Movie+2', genre: 'romance' },
            ...movieData['ì‹ ë‚˜ëŠ”'].slice(5, 9)
        ];
        movieData['ìƒê°ì´ ë§ì€'] = [
            { id: 31, title: 'ì¸í„°ìŠ¤í…”ë¼', poster: 'https://placehold.co/320x450/6366F1/white?text=Deep+Movie+1', genre: 'sf' },
            { id: 32, title: 'ì»¨íƒíŠ¸', poster: 'https://placehold.co/320x450/6366F1/white?text=Deep+Movie+2', genre: 'sf' },
            ...movieData['ìœ„ë¡œê°€ í•„ìš”í•œ'].slice(4, 8)
        ];


        let currentMood = '';
        let currentCardList = [];
        let currentCardIndex = 0;
        let userLikes = [];

        // --- 1. ê¸°ë¶„ ì„ íƒ ---
        moodButtons.forEach(button => {
            button.addEventListener('click', () => {
                currentMood = button.dataset.moodText;
                const emoji = button.dataset.moodEmoji;
                
                // 2ë‹¨ê³„ ì œëª© ì„¤ì •
                swipeTitle.innerHTML = `${emoji} ${currentMood} ê¸°ë¶„ì„ ìœ„í•œ<br>ì·¨í–¥ ë¶„ì„`;
                
                // 2ë‹¨ê³„ ì¹´ë“œ ë± ìƒì„±
                loadCardDeck(currentMood);
                
                // í™”ë©´ ì „í™˜
                screen1.classList.add('hidden');
                screen2.classList.remove('hidden');
            });
        });

        // --- 2. ì¹´ë“œ ë± ë¡œë“œ ---
        function loadCardDeck(mood) {
            currentCardList = movieData[mood] || movieData['ì‹ ë‚˜ëŠ”']; // ê¸°ë³¸ê°’
            currentCardIndex = 0;
            userLikes = [];
            cardDeck.innerHTML = ''; // ë± ì´ˆê¸°í™”

            currentCardList.forEach((movie, index) => {
                const card = document.createElement('div');
                card.className = 'swipe-card';
                card.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="w-full h-full object-cover">
                    <div class="absolute bottom-0 left-0 w-full h-2/5 bg-gradient-to-t from-black/80 to-transparent p-4">
                        <h3 class="text-white text-2xl font-bold break-keep">${movie.title}</h3>
                    </div>
                `;
                // z-index ì„¤ì • (ë§¨ ìœ„ ì¹´ë“œ(index 0)ê°€ z-index 10, ë§¨ ì•„ë˜ ì¹´ë“œ(index 9)ê°€ z-index 1)
                card.style.zIndex = currentCardList.length - index;
                cardDeck.appendChild(card);
            });

            updateProgress();
        }

        // --- 3. ìŠ¤ì™€ì´í”„ ë¡œì§ ---
        likeBtn.addEventListener('click', () => handleSwipe('right'));
        dislikeBtn.addEventListener('click', () => handleSwipe('left'));

        function handleSwipe(direction) {
            if (currentCardIndex >= currentCardList.length) return; // ëª¨ë“  ì¹´ë“œë¥¼ ë„˜ê¹€

            const cards = cardDeck.querySelectorAll('.swipe-card');
            
            const targetZIndex = currentCardList.length - currentCardIndex;
            const currentCardElement = Array.from(cards).find(card => card.style.zIndex == targetZIndex);
            
            if (!currentCardElement) return;

            // 'ì¢‹ì•„ìš”' ê¸°ë¡
            if (direction === 'right') {
                userLikes.push(currentCardList[currentCardIndex]);
            }

            // ìŠ¤ì™€ì´í”„ ì• ë‹ˆë©”ì´ì…˜
            currentCardElement.classList.add(direction === 'right' ? 'swipe-right' : 'swipe-left');
            
            currentCardIndex++;
            updateProgress();
            
            // ëª¨ë“  ì¹´ë“œë¥¼ ì„ íƒí–ˆì„ ë•Œ
            if (currentCardIndex === currentCardList.length) {
                setTimeout(showCompletion, 500);
            }
        }
        
        function updateProgress() {
            const percent = (currentCardIndex / currentCardList.length) * 100;
            progressBar.style.width = `${percent}%`;
            progressText.textContent = `${currentCardIndex}/${currentCardList.length}`;
        }

        // --- 4. ì™„ë£Œ í™”ë©´ ---
        function showCompletion() {
            screen2.classList.add('hidden');
            screen3.classList.remove('hidden');

            // 2ì´ˆê°„ 'AI ë¶„ì„ ì¤‘' ë¡œë”© í‘œì‹œ
            setTimeout(() => {
                // (ì‹¤ì œë¡œëŠ” userLikes ë°°ì—´ì„ ì„œë²„ë¡œ ë³´ë‚´ ë¶„ì„ ê²°ê³¼ë¥¼ ë°›ì•„ì˜´)
                // ì—¬ê¸°ì„œëŠ” ì„ì‹œë¡œ 'ì¢‹ì•„ìš”'í•œ ì˜í™”ì˜ ì¥ë¥´ë¥¼ ë¶„ì„
                const genreCounts = {};
                userLikes.forEach(movie => {
                    genreCounts[movie.genre] = (genreCounts[movie.genre] || 0) + 1;
                });
                
                // ê°€ì¥ ë§ì´ ì„ íƒëœ ì¥ë¥´ ì°¾ê¸°
                let maxGenre = '';
                let maxCount = 0;
                for (const genre in genreCounts) {
                    if (genreCounts[genre] > maxCount) {
                        maxCount = genreCounts[genre];
                        maxGenre = genre;
                    }
                }
                
                // ê²°ê³¼ í…ìŠ¤íŠ¸ ì„¤ì •
                const genreMap = {
                    'action': "'ë¸”ë¡ë²„ìŠ¤í„° ì•¡ì…˜'",
                    'drama': "'ê°ì„±ì ì¸ ë“œë¼ë§ˆ'",
                    'romance': "'ë¡œë§¨í‹± ì½”ë¯¸ë””'",
                    'animation': "'ë”°ëœ»í•œ ì• ë‹ˆë©”ì´ì…˜'",
                    'sf': "'SF/íŒíƒ€ì§€'",
                    'default': "'ë‹¤ì–‘í•œ ì¥ë¥´'"
                };
                
                if (userLikes.length === 0) {
                    resultText.innerHTML = "'... ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”!'";
                } else {
                    resultText.innerHTML = (genreMap[maxGenre] || genreMap['default']) + "ë¥¼";
                }


                loadingState.classList.add('hidden');
                resultState.classList.remove('hidden');
            }, 2000);
        }

        // --- ìŠ¤íƒ€ì¼ í—¬í¼ (CSSë¡œ ì²˜ë¦¬í•˜ì§€ ëª»í•œ ë¶€ë¶„) ---
        // 'ê¸°ë¶„' ë²„íŠ¼ ìŠ¤íƒ€ì¼
        document.querySelectorAll('.mood-btn').forEach(btn => {
            btn.classList.add(
                'flex', 'flex-col', 'items-center', 'justify-center', 
                'p-6', 'bg-neutral-50', 'rounded-xl', 'border-2', 'border-neutral-200', 
                'hover:border-amber-500', 'hover:bg-amber-50', 'transition-all', 'duration-200', 'cursor-pointer'
            );
        });

    </script>
</body>
</html>